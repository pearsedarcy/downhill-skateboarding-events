{% extends 'base.html' %}
{% load static %}

{% block title %}{{ block.super }} - Competition Results{% endblock %}
{% block meta_description %}View the latest downhill skateboarding competition results including time trials and knockout events.{% endblock %}

{% block content %}
<div class="container mx-auto px-1 max-w-[1400px]">
    <div class="prose mb-6">
        <h1 class="text-2xl md:text-3xl font-bold">Competition Results</h1>
    </div>

    {% if not time_trial_results and not knockout_results %}
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <div class="alert alert-info shadow-lg">
                    <div class="flex items-start space-x-4">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current flex-shrink-0 w-8 h-8 mt-1">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="flex-1">
                            <h3 class="font-bold">No Results Available</h3>
                            <div class="text-xs">No competition results have been uploaded yet. Check back after upcoming events!</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Time Trial Results -->
            <div class="card bg-base-100 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-xl mb-4">Time Trial Results</h2>
                    {% if time_trial_results %}
                        <div class="space-y-4">
                            {% for result in time_trial_results %}
                                <div class="card bg-base-200 hover:bg-base-300 transition-colors duration-200">
                                    <a href="{% url 'results:view_results' result.event.id %}" class="card-body p-4">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h3 class="font-bold">{{ result.event.title }}</h3>
                                                <div class="text-sm opacity-70">
                                                    {% if result.event.location %}
                                                        {{ result.event.location.city }}, {{ result.event.location.country.name }}
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="badge badge-primary">Time Trial</div>
                                                <div class="text-sm opacity-70 mt-1">
                                                    {{ result.uploaded_at|date:"d M Y" }}
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="alert alert-info">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>No time trial results available.</span>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Knockout Results -->
            <div class="card bg-base-100 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-xl mb-4">Knockout Results</h2>
                    {% if knockout_results %}
                        <div class="space-y-4">
                            {% for result in knockout_results %}
                                <div class="card bg-base-200 hover:bg-base-300 transition-colors duration-200">
                                    <a href="{% url 'results:view_results' result.event.id %}" class="card-body p-4">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h3 class="font-bold">{{ result.event.title }}</h3>
                                                <div class="text-sm opacity-70">
                                                    {% if result.event.location %}
                                                        {{ result.event.location.city }}, {{ result.event.location.country.name }}
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="badge badge-secondary">Knockout</div>
                                                <div class="text-sm opacity-70 mt-1">
                                                    {{ result.uploaded_at|date:"d M Y" }}
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="alert alert-info">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>No knockout results available.</span>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
