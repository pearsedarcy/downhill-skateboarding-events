{% load static %}

<a href="{% url 'results:league_standings' league.slug %}" 
   class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-200">
  <div class="card-body p-0">
    <!-- Leaders Table with banner background -->
    <div class="relative">
      <div class="bg-base-300 rounded-t-2xl overflow-hidden h-80">
        {% if league.banner %}
        <div class="absolute inset-0 z-0">
          <img src="{{ league.banner.url }}" alt="" class="w-full h-full object-cover opacity-70">
        </div>
        {% endif %}

        <!-- League logo positioned at bottom right of image -->
        <div class="absolute bottom-4 right-4 z-20 bg-base-100 rounded-lg shadow-lg">
          {% if league.logo %}
          <img src="{{ league.logo.url }}" alt="{{ league.name }}" class="w-12 h-12 object-contain">
          {% else %}
          <div class="w-12 h-12 flex items-center justify-center">
            <i class="fas fa-trophy text-2xl text-primary"></i>
          </div>
          {% endif %}
        </div>

        <div class="bg-base-200 bg-opacity-80 absolute inset-0 flex flex-col z-10">
          <div class="p-4">
            <div class="flex justify-between items-start mb-2">
              <div>
                <div class="badge badge-primary">{{ league.get_league_class_display }}</div>
                {% if league.country %}
                <div class="badge badge-ghost">{{ league.country.name }}</div>
                {% endif %}
              </div>
            </div>
          </div>

          <div class="flex-1 overflow-auto px-4 pb-4">
            <table class="table table-sm w-full">
              <thead class="sticky top-0 bg-base-200 bg-opacity-90">
                <tr>
                  <th class="w-8">#</th>
                  <th>Rider</th>
                  <th class="text-right">Points</th>
                </tr>
              </thead>
              <tbody>
                <!-- Hardcoded EuroTour 25 Results -->
                <tr>
                  <td class="w-8">
                    <svg class="w-6 h-6 text-yellow-500" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                    </svg>
                  </td>
                  <td>Stefano Barbizzi <span class="text-xs opacity-70">(Open Skate)</span></td>
                  <td class="text-right">
                    <span class="badge badge-primary">2,848</span>
                  </td>
                </tr>
                <tr>
                  <td class="w-8">
                    <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                    </svg>
                  </td>
                  <td>Alex Clark <span class="text-xs opacity-70">(Open Skate)</span></td>
                  <td class="text-right">
                    <span class="badge badge-primary">2,774</span>
                  </td>
                </tr>
                <tr>
                  <td class="w-8">
                    <svg class="w-6 h-6 text-amber-700" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                    </svg>
                  </td>
                  <td>Mitchell Thompson <span class="text-xs opacity-70">(Open Skate)</span></td>
                  <td class="text-right">
                    <span class="badge badge-primary">2,707</span>
                  </td>
                </tr>
                <tr>
                  <td class="w-8">4</td>
                  <td>Selina Theiler <span class="text-xs opacity-70">(Women's Skate)</span></td>
                  <td class="text-right">
                    <span class="badge badge-secondary">3,000</span>
                  </td>
                </tr>
                <tr>
                  <td class="w-8">5</td>
                  <td>David Frega <span class="text-xs opacity-70">(Open Luge)</span></td>
                  <td class="text-right">
                    <span class="badge badge-accent">2,883</span>
                  </td>
                </tr>
                <tr>
                  <td class="w-8">6</td>
                  <td>Charlotte Farges <span class="text-xs opacity-70">(Women's Luge)</span></td>
                  <td class="text-right">
                    <span class="badge badge-info">3,000</span>
                  </td>
                </tr>
                
                <!-- Original template code - commented out for now -->
                <!--
                {% for standing in league.top_standings %}
                  <tr>
                    <td class="w-8">
                      {% if standing.position == 1 %}
                        <svg class="w-6 h-6 text-yellow-500" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                        </svg>
                      {% elif standing.position == 2 %}
                        <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                        </svg>
                      {% elif standing.position == 3 %}
                        <svg class="w-6 h-6 text-amber-700" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                        </svg>
                      {% else %}
                        {{ standing.position }}
                      {% endif %}
                    </td>
                    <td>{{ standing.competitor.user.get_full_name }}</td>
                    <td class="text-right">
                      <span class="badge badge-primary">{{ standing.points }}</span>
                    </td>
                  </tr>
                {% empty %}
                  <tr>
                    <td colspan="3" class="text-center text-base-content/70">
                      No standings yet
                    </td>
                  </tr>
                {% endfor %}
                -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Regular card content -->
    <div class="p-4">
      <!-- Hardcoded EuroTour 25 content -->
      <h2 class="card-title">EuroTour 25 Championship</h2>
      <p class="text-base-content/70 mt-2">Final standings from the 2025 European Downhill Skateboarding Championship series featuring 5 epic events across Europe: Alva, Veko, Vercors, Sornetan, and Arena.</p>
      <div class="flex justify-between items-center mt-4">
        <div class="badge badge-ghost">5 events â€¢ 220+ riders</div>
        <div class="btn btn-primary btn-sm">View Standings</div>
      </div>
      
      <!-- Original template content - commented out for now -->
      <!--
      <h2 class="card-title">{{ league.name }}</h2>
      <p class="text-base-content/70 mt-2">{{ league.description|truncatewords:30 }}</p>
      <div class="flex justify-between items-center mt-4">
        <div class="badge badge-ghost">{{ league.events.count }} events</div>
        <div class="btn btn-primary btn-sm">View Standings</div>
      </div>
      -->
    </div>
  </div>
</a>